<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<body>
<table class="table table-hover container-xxl">
    <thead>
    <tr class="table-info">
        <th scope="row">ID</th>
        <td>멤버이름</td>
        <td>전화번호</td>
        <td>등급</td>
        <td>가입일자</td>
    </tr>
    </thead>
    
    <tbody id="memberTbody">
    <tr th:each="member, i : ${memberPaging}" th:class="memberPaging"
        class="table-light" data-bs-toggle="modal" th:attr="data-bs-target='#memberDetail_' + ${member.id}">
        <th th:text="${member.getId()}" scope="row">ID</th>
        <td th:text="${member.getName()}">멤버이름</td>
        <td th:text="${member.getTel()}">전화번호</td>
        <td th:text="${member.getRole()}">등급</td>
        <td th:text="${member.getIndate()}">가입일자</td>
    </tr>
    </tbody>
</table>
<div id="pagingNumberBox" th:if="${!memberPaging.isEmpty()}">
    <ul class="pagination justify-content-center">
        <li th:classappend="${!memberPaging.hasPrevious()} ? 'disabled'" class="page-item">
            <a class="page-link" href="javascript:void(0)"
               th:data-page="${(memberPaging.number) - 1}">&lsaquo;</a>
        </li>
        <li th:each="page : ${#numbers.sequence(0, memberPaging.getTotalPages() - 1)}"
            th:if="${page >= memberPaging.number - 10 and page <= memberPaging.number + 10}"
            th:classappend="${page == memberPaging.number} ? 'active'" class="page-item">
            <a th:text="${page + 1}" href="javascript:void(0)" th:data-page="${page}"
               class="page-link"></a>
        </li>
        <li th:classappend="${!memberPaging.hasNext()} ? 'disabled'" class="page-item">
            <a class="page-link" href="javascript:void(0)"
               th:data-page="${(memberPaging.number) + 1}">&rsaquo;</a>
        </li>
    </ul>
</div>
<!--suppress JSFileReferences -->
<script type="module">
    import {sendAjax} from "/managementJS/member/member_management_AjaxModel.js";

    const $pageLink = $('.page-link');
    const $searchKeyword = $('#searchKeyword');
    const $searchOption = $('#searchOption');
    
    $pageLink.on('click', function () {
        const page = $(this).data('page');
        const keyword = $searchKeyword.val();
        const option = $searchOption.val();

        sendAjax(page, keyword, option);
    });
</script>
<script type="module"></script>
</body>
</html>